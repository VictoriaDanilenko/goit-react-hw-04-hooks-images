(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={Overlay:"modal_Overlay__1oGyr",Modal:"modal_Modal__XPxL3"}},12:function(e,t,a){e.exports={Button:"button_Button__Hax0N"}},13:function(e,t,a){e.exports={ImageGallery:"imageGallery_ImageGallery__3y41b"}},15:function(e,t,a){e.exports={Spinner:"loader_Spinner__uxGuF"}},16:function(e,t,a){e.exports={App:"app_App__3ALCk"}},4:function(e,t,a){e.exports={Searchbar:"searchBar_Searchbar__2Hm9W",SearchForm:"searchBar_SearchForm__31fn2",SearchForm_button:"searchBar_SearchForm_button__2alXB",SearchForm_button_label:"searchBar_SearchForm_button_label__1PbKk",SearchForm_input:"searchBar_SearchForm_input__1y2-z"}},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),i=a(11),l=a(3),s=a(4),u=a.n(s),m=a(1);function b(e){var t=e.inputSubmit,a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],o=r[1];return Object(m.jsx)("header",{className:u.a.Searchbar,children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),o("")):alert("Enter search request")},className:u.a.SearchForm,children:[Object(m.jsx)("button",{type:"submit",className:u.a.SearchForm_button,children:Object(m.jsx)("span",{className:u.a.SearchForm_button_label,children:"Search"})}),Object(m.jsx)("input",{className:u.a.SearchForm_input,type:"text",value:c,onChange:function(e){var t=e.currentTarget.value;o(t)},autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",required:!0})]})})}var h=a(9),j=a.n(h);function d(e){var t=e.hits,a=e.onClick;return Object(n.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[t]),t.map((function(e){var t=e.id,n=e.tags,r=e.webformatURL,c=e.largeImageURL;return Object(m.jsx)("li",{className:j.a.ImageGalleryItem,children:Object(m.jsx)("img",{onClick:a,src:r,lowsrc:c,alt:n,className:j.a.ImageGalleryItem_image})},t)}))}var f=a(12),_=a.n(f),O=function(e){var t=e.onClick,a=e.btnName;return Object(m.jsx)("button",{type:"button",className:_.a.Button,onClick:function(){return t()},children:a})},p=a(13),g=a.n(p),x=function(e){var t=e.gallery,a=e.loadMore,n=e.showModal;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{className:g.a.ImageGallery,children:Object(m.jsx)(d,{hits:t,onClick:n})}),Object(m.jsx)(O,{onClick:a,btnName:"Load more"})]})},S=a(14),y=a.n(S),v=a(15),w=a.n(v),I=function(){return Object(m.jsx)("div",{className:w.a.Spinner,children:Object(m.jsx)(y.a,{type:"Puff",color:"#3f51b599",height:300,width:300,timeout:3e3})})},k=a(10),F=a.n(k),N=document.querySelector("#modal-root");function G(e){var t=e.children,a=e.onClose;return Object(n.useEffect)((function(){function e(e){"Escape"===e.code&&a()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[a]),Object(c.createPortal)(Object(m.jsx)("div",{className:F.a.Overlay,onClick:function(e){e.target===e.currentTarget&&a()},children:Object(m.jsx)("div",{className:F.a.Modal,children:t})}),N)}var C=function(e,t){return fetch("".concat("https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=12&key=").concat("21847768-5e5b2f7eaa86d5895d80eb462","&q=").concat(e,"&page=").concat(t)).then((function(t){return t.ok?t.json():Promise.reject(new Error("Search request ".concat(e," not found")))}))},B=a(16),E=a.n(B);function M(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(l.a)(c,2),s=o[0],u=o[1],h=Object(n.useState)(1),j=Object(l.a)(h,2),d=j[0],f=j[1],_=Object(n.useState)(!1),O=Object(l.a)(_,2),p=O[0],g=O[1],S=Object(n.useState)(""),y=Object(l.a)(S,2),v=y[0],w=y[1],k=Object(n.useState)(!1),F=Object(l.a)(k,2),N=F[0],B=F[1],M=Object(n.useState)("init"),L=Object(l.a)(M,2),q=L[0],P=L[1],A=Object(n.useState)(null),R=Object(l.a)(A,2),T=R[0],z=R[1],H=Object(n.useRef)(!0),J=function(e){e&&w(e.target.lowsrc),g(!p)};return Object(n.useEffect)((function(){H.current?H.current=!1:(B(!0),1===d&&u([]),C(a,d).then((function(e){if(1!==d&&u((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.hits))})),1===d){if(0===e.hits.length)return u(e.hits),void P("nothingFound");u(e.hits),P("init")}})).catch((function(e){z(e),T&&console.log(T)})).finally((function(){return B(!1)})))}),[a,d,T]),Object(m.jsxs)("div",{className:E.a.App,children:[Object(m.jsx)(b,{inputSubmit:function(e){r(e),P("init"),f(1)}}),N&&"init"===q&&Object(m.jsx)(I,{}),s.length>1&&Object(m.jsx)(x,{gallery:s,loadMore:function(){f((function(e){return e+1})),P("loadMore")},showModal:J}),"nothingFound"===q&&null!==a&&Object(m.jsx)("h1",{children:"Nothing found.... Try again"}),p&&Object(m.jsx)(G,{onClose:J,children:Object(m.jsx)("img",{src:v,alt:""})})]})}a(42);o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(M,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={ImageGalleryItem:"imageGalleryItem_ImageGalleryItem__2J6d9",ImageGalleryItem_image:"imageGalleryItem_ImageGalleryItem_image__2Rcez"}}},[[43,1,2]]]);
//# sourceMappingURL=main.a8b0d105.chunk.js.map